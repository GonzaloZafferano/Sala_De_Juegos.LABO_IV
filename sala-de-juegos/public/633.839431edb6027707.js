"use strict";(self.webpackChunksala_de_juegos=self.webpackChunksala_de_juegos||[]).push([[633],{7633:(j,m,a)=>{a.r(m),a.d(m,{LoginModule:()=>I});var f=a(6895),g=a(6647),p=a(5861),i=a(433),h=a(8335),v=a(2531),x=a(904),o=a(4650),U=a(6939),_=a(7677),Z=a(6643),b=a(4443);function L(e,s){1&e&&(o.TgZ(0,"div",3)(1,"span",4),o._uU(2,"Cargando..."),o.qZA(),o._UZ(3,"div",5),o.qZA())}function y(e,s){if(1&e&&(o.ynx(0),o.TgZ(1,"small",20),o._uU(2),o.qZA(),o.BQk()),2&e){const r=o.oxw(2);o.xp6(2),o.Oqu(null==r.correo?null:r.correo.getError("errorCorreo"))}}function C(e,s){if(1&e&&(o.ynx(0),o.TgZ(1,"small",20),o._uU(2),o.qZA(),o.BQk()),2&e){const r=o.oxw(2);o.xp6(2),o.hij(" La clave debe contener por lo menos ",null==r.clave?null:r.clave.getError("minlength").requiredLength," caracteres. ")}}function T(e,s){if(1&e){const r=o.EpF();o.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"form",9),o.NdJ("ngSubmit",function(){o.CHM(r);const n=o.oxw();return o.KtG(n.iniciarSesion())}),o.TgZ(4,"fieldset")(5,"legend"),o._uU(6,"Complete sus datos para ingresar"),o.qZA(),o.TgZ(7,"div")(8,"label",10),o._uU(9,"Ingrese su correo electr\xf3nico"),o.qZA(),o._UZ(10,"input",11),o.YNc(11,y,3,1,"ng-container",12),o.qZA(),o.TgZ(12,"div")(13,"label",13),o._uU(14,"Ingrese una contrase\xf1a"),o.qZA(),o._UZ(15,"input",14),o.YNc(16,C,3,1,"ng-container",12),o.qZA(),o.TgZ(17,"div",15)(18,"label",16),o._uU(19,"\xbfNo posee una cuenta? Registrese "),o.TgZ(20,"a",17),o._uU(21,"AQUI"),o.qZA()(),o.TgZ(22,"button",18),o._uU(23," Ingresar "),o.qZA()()()(),o.TgZ(24,"button",19),o.NdJ("click",function(){o.CHM(r);const n=o.oxw();return o.KtG(n.cargarUsuarioDefault(0))}),o._uU(25,"Usuario"),o.qZA(),o.TgZ(26,"button",19),o.NdJ("click",function(){o.CHM(r);const n=o.oxw();return o.KtG(n.cargarUsuarioDefault(1))}),o._uU(27,"Usuario 2"),o.qZA(),o.TgZ(28,"button",19),o.NdJ("click",function(){o.CHM(r);const n=o.oxw();return o.KtG(n.cargarUsuarioDefault(2))}),o._uU(29,"Usuario 2"),o.qZA()()()()}if(2&e){const r=o.oxw();o.xp6(3),o.Q6J("formGroup",r.form),o.xp6(8),o.Q6J("ngIf",null==r.correo?null:r.correo.hasError("errorCorreo")),o.xp6(5),o.Q6J("ngIf",null==r.clave?null:r.clave.hasError("minlength"))}}const w=[{path:"",children:[{path:"",component:(()=>{class e{constructor(r,t,n,l,c){this.logDeUsuario=r,this.router=t,this.firestoreLogin=n,this.fsUsuarioService=l,this.toastPredeterminado=c,this.usuario=new v.b,this.cargando=!1,this.listaUsuarios=[{correo:"prueba@prueba.com",clave:"111111"},{correo:"nicolas@prueba.com",clave:"111111"},{correo:"gonzalo@prueba.com",clave:"111111"}]}ngOnInit(){this.firestoreLogin.usuarioAceptoTeminos=!1,this.form=new i.cw({correo:new i.NI("",{validators:[(0,x.qc)()]}),clave:new i.NI("",{validators:[i.kI.minLength(6)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){this.cargando=!0;let r=!1,t=!1;for(const l in this.form.controls)if(this.form.controls.hasOwnProperty(l)){const c=this.form.controls[l];c.errors&&(r=!0),(null==c.value||""==c.value)&&(t=!0)}let n="";r&&(n+="Hay campos con errores, por favor corr\xedjalos para poder registrarse. </br>"),t&&(n+="Hay campos vac\xedos, por favor compl\xe9telos para poder registrarse."),(r||t)&&(this.toastPredeterminado.error(n,"Error."),this.cargando=!1),!r&&!t&&this.loguearUsuario()}loguearUsuario(){var r=this;let t="";this.firestoreLogin.loguearUsuario(this.correo?.value,this.clave?.value).then(function(){var n=(0,p.Z)(function*(l){let c=l.user?.uid;null!=c?yield r.fsUsuarioService.traerUsuarioPorId(c).then(d=>{if(null!=d){let u=d;r.usuario.clave=u.clave,r.usuario.correo=u.correo,r.usuario.usuario=u.usuario,r.usuario.id=u.id,r.usuario.fechaRegistro=u.fechaRegistro,r.logDeUsuario.cargarUsuarioConIdAsignado(new h.Z(r.usuario.id)),r.toastPredeterminado.exito(`Bienvenido/a ${r.usuario.usuario}!`,"Login exitoso!"),r.firestoreLogin.usuarioAceptoTeminos=!0,r.router.navigate(["../home"]),setTimeout(()=>{r.cargando=!1},1e3)}else t="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch():t="Ha ocurrido un error al intentar cargar los datos del usuario.",""!=t&&(r.toastPredeterminado.error(t),r.cargando=!1)});return function(l){return n.apply(this,arguments)}}()).catch(n=>{switch(n.code){case"auth/invalid-email":t="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":t="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":t="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":t="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":t="Usuario no encontrado.";break;default:t="Ha ocurrido un error y no se pudo cargar el usuario."}""!=t&&(this.toastPredeterminado.error(t,"Ha ocurrido un error."),this.cargando=!1)})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(r){this.correo?.setValue(this.listaUsuarios[r].correo),this.clave?.setValue(this.listaUsuarios[r].clave)}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(U.n),o.Y36(g.F0),o.Y36(_.I),o.Y36(Z.u),o.Y36(b.j))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:4,vars:2,consts:[[1,"container"],["class","d-flex justify-content-center","style","align-items: center; height: 100% !important;",4,"ngIf","ngIfElse"],["formulario",""],[1,"d-flex","justify-content-center",2,"align-items","center","height","100% !important"],[1,"m-3","fs-3","fw-bold","text-dark"],[1,"spinner-border","text-light",2,"align-self","center","scale","1.2"],[1,"row","w-100","d-flex","justify-content-center","ml-0",2,"align-self","center"],[1,"col","col-12","justify-content-center","col-lg-6"],[1,"card","p-4","mt-4","centrar","sombra"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mt-3"],["routerLink","../registro",1,""],["type","submit",1,"btn","btn-primary","mt-2","fw-bold","fs-5"],[1,"btn","btn-secondary","m-1","w-25","fw-bold","fs-6",3,"click"],[1,"d-block","text-danger"]],template:function(r,t){if(1&r&&(o.TgZ(0,"div",0),o.YNc(1,L,4,0,"div",1),o.YNc(2,T,30,3,"ng-template",null,2,o.W1O),o.qZA()),2&r){const n=o.MAs(3);o.xp6(1),o.Q6J("ngIf",t.cargando)("ngIfElse",n)}},dependencies:[f.O5,g.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".centrar[_ngcontent-%COMP%]{margin:0 auto}.sombra[_ngcontent-%COMP%]{box-shadow:10px 10px 50px #ff060633;border-radius:30px}"]}),e})()}]}];let A=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[g.Bz.forChild(w),g.Bz]}),e})(),I=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[f.ez,A,i.u5,i.UX]}),e})()}}]);