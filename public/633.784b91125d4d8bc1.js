"use strict";(self.webpackChunksala_de_juegos=self.webpackChunksala_de_juegos||[]).push([[633],{7633:(w,m,a)=>{a.r(m),a.d(m,{LoginModule:()=>I});var d=a(6895),g=a(9036),p=a(5861),n=a(433),h=a(8335),v=a(2531),U=a(904),o=a(4650),L=a(6939),y=a(6842),Z=a(3701),b=a(4443);function C(t,s){if(1&t&&(o.ynx(0),o.TgZ(1,"small",13),o._uU(2),o.qZA(),o.BQk()),2&t){const r=o.oxw();o.xp6(2),o.Oqu(null==r.correo?null:r.correo.getError("errorCorreo"))}}function T(t,s){if(1&t&&(o.ynx(0),o.TgZ(1,"small",13),o._uU(2),o.qZA(),o.BQk()),2&t){const r=o.oxw();o.xp6(2),o.hij(" La clave debe contener por lo menos ",null==r.clave?null:r.clave.getError("minlength").requiredLength," caracteres. ")}}const x=[{path:"",children:[{path:"",component:(()=>{class t{constructor(r,e,i,l,u){this.logDeUsuario=r,this.router=e,this.firestoreLogin=i,this.fsUsuarioService=l,this.toastPredeterminado=u,this.usuario=new v.b}ngOnInit(){this.form=new n.cw({correo:new n.NI("",{validators:[(0,U.qc)()]}),clave:new n.NI("",{validators:[n.kI.minLength(6)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){console.log(this.form.value);let r=!1,e=!1;for(const l in this.form.controls)if(this.form.controls.hasOwnProperty(l)){const u=this.form.controls[l];u.errors&&(r=!0),(null==u.value||""==u.value)&&(e=!0)}let i="";r&&(i+="Hay campos con errores, por favor corr\xedjalos para poder registrarse. </br>"),e&&(i+="Hay campos vac\xedos, por favor compl\xe9telos para poder registrarse."),(r||e)&&this.toastPredeterminado.error(i,"Error."),!r&&!e&&this.loguearUsuario()}loguearUsuario(){var r=this;let e="";this.firestoreLogin.loguearUsuario(this.correo?.value,this.clave?.value).then(function(){var i=(0,p.Z)(function*(l){let u=l.user?.uid;null!=u?yield r.fsUsuarioService.traerUsuarioPorId(u).then(f=>{if(f.length>0){let c=f[0];r.usuario.clave=c.clave,r.usuario.correo=c.correo,r.usuario.usuario=c.usuario,r.usuario.id=c.id,r.usuario.fechaRegistro=c.fechaRegistro,r.logDeUsuario.cargarUsuarioConIdAsignado(new h.Z(r.usuario.id)),r.toastPredeterminado.exito(`Bienvenido/a ${r.usuario.usuario}!`,"Login exitoso!"),r.router.navigate(["../home"])}else e="Ha ocurrido un error al intentar cargar los datos del usuario."}):e="Ha ocurrido un error al intentar cargar los datos del usuario.",""!=e&&r.toastPredeterminado.error(e)});return function(l){return i.apply(this,arguments)}}()).catch(i=>{switch(i.code){case"auth/invalid-email":e="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":e="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":e="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":e="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":e="Usuario no encontrado.";break;default:e="Ha ocurrido un error y no se pudo cargar el usuario."}""!=e&&this.toastPredeterminado.error(e,"Ha ocurrido un error.")})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(){this.correo?.setValue("prueba@prueba.com"),this.clave?.setValue("111111")}}return t.\u0275fac=function(r){return new(r||t)(o.Y36(L.n),o.Y36(g.F0),o.Y36(y.I),o.Y36(Z.u),o.Y36(b.j))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:25,vars:3,consts:[[1,"container"],[1,"card","p-4","mt-4","w-50","centrar","sombra"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mt-3"],["routerLink","../registro",1,""],["type","submit",1,"btn","btn-primary","mt-2"],[1,"btn","btn-secondary","w-25",3,"click"],[1,"d-block","text-danger"]],template:function(r,e){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"form",2),o.NdJ("ngSubmit",function(){return e.iniciarSesion()}),o.TgZ(3,"fieldset")(4,"legend"),o._uU(5,"Complete sus datos para ingresar"),o.qZA(),o.TgZ(6,"div")(7,"label",3),o._uU(8,"Ingrese su correo electr\xf3nico"),o.qZA(),o._UZ(9,"input",4),o.YNc(10,C,3,1,"ng-container",5),o.qZA(),o.TgZ(11,"div")(12,"label",6),o._uU(13,"Ingrese una contrase\xf1a"),o.qZA(),o._UZ(14,"input",7),o.YNc(15,T,3,1,"ng-container",5),o.qZA(),o.TgZ(16,"div",8)(17,"label",9),o._uU(18,"\xbfNo posee una cuenta? Registrese "),o.TgZ(19,"a",10),o._uU(20,"AQUI"),o.qZA()(),o.TgZ(21,"button",11),o._uU(22," Ingresar "),o.qZA()()()(),o.TgZ(23,"button",12),o.NdJ("click",function(){return e.cargarUsuarioDefault()}),o._uU(24,"Usuario Default"),o.qZA()()()),2&r&&(o.xp6(2),o.Q6J("formGroup",e.form),o.xp6(8),o.Q6J("ngIf",null==e.correo?null:e.correo.hasError("errorCorreo")),o.xp6(5),o.Q6J("ngIf",null==e.clave?null:e.clave.hasError("minlength")))},dependencies:[d.O5,g.rH,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u],styles:[".centrar[_ngcontent-%COMP%]{margin:0 auto}.sombra[_ngcontent-%COMP%]{box-shadow:10px 10px 50px #ff060633;border-radius:30px}"]}),t})()}]}];let A=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[g.Bz.forChild(x),g.Bz]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[d.ez,A,n.u5,n.UX]}),t})()}}]);