"use strict";(self.webpackChunksala_de_juegos=self.webpackChunksala_de_juegos||[]).push([[633],{7633:(x,m,t)=>{t.r(m),t.d(m,{LoginModule:()=>I});var d=t(6895),g=t(6647),p=t(5861),i=t(433),h=t(8335),v=t(2531),U=t(904),o=t(4650),b=t(6939),L=t(7677),Z=t(6643),y=t(4443);function C(a,s){if(1&a&&(o.ynx(0),o.TgZ(1,"small",13),o._uU(2),o.qZA(),o.BQk()),2&a){const r=o.oxw();o.xp6(2),o.Oqu(null==r.correo?null:r.correo.getError("errorCorreo"))}}function T(a,s){if(1&a&&(o.ynx(0),o.TgZ(1,"small",13),o._uU(2),o.qZA(),o.BQk()),2&a){const r=o.oxw();o.xp6(2),o.hij(" La clave debe contener por lo menos ",null==r.clave?null:r.clave.getError("minlength").requiredLength," caracteres. ")}}const A=[{path:"",children:[{path:"",component:(()=>{class a{constructor(r,e,n,l,u){this.logDeUsuario=r,this.router=e,this.firestoreLogin=n,this.fsUsuarioService=l,this.toastPredeterminado=u,this.usuario=new v.b,this.listaUsuarios=[{correo:"prueba@prueba.com",clave:"111111"},{correo:"nicolas@prueba.com",clave:"111111"},{correo:"gonzalo@prueba.com",clave:"111111"}]}ngOnInit(){this.form=new i.cw({correo:new i.NI("",{validators:[(0,U.qc)()]}),clave:new i.NI("",{validators:[i.kI.minLength(6)]})})}get correo(){return this.form.get("correo")}get clave(){return this.form.get("clave")}iniciarSesion(){let r=!1,e=!1;for(const l in this.form.controls)if(this.form.controls.hasOwnProperty(l)){const u=this.form.controls[l];u.errors&&(r=!0),(null==u.value||""==u.value)&&(e=!0)}let n="";r&&(n+="Hay campos con errores, por favor corr\xedjalos para poder registrarse. </br>"),e&&(n+="Hay campos vac\xedos, por favor compl\xe9telos para poder registrarse."),(r||e)&&this.toastPredeterminado.error(n,"Error."),!r&&!e&&this.loguearUsuario()}loguearUsuario(){var r=this;let e="";this.firestoreLogin.loguearUsuario(this.correo?.value,this.clave?.value).then(function(){var n=(0,p.Z)(function*(l){let u=l.user?.uid;null!=u?yield r.fsUsuarioService.traerUsuarioPorId(u).then(f=>{if(null!=f){let c=f;r.usuario.clave=c.clave,r.usuario.correo=c.correo,r.usuario.usuario=c.usuario,r.usuario.id=c.id,r.usuario.fechaRegistro=c.fechaRegistro,r.logDeUsuario.cargarUsuarioConIdAsignado(new h.Z(r.usuario.id)),r.toastPredeterminado.exito(`Bienvenido/a ${r.usuario.usuario}!`,"Login exitoso!"),r.router.navigate(["../home"])}else e="Ha ocurrido un error al intentar cargar los datos del usuario."}).catch():e="Ha ocurrido un error al intentar cargar los datos del usuario.",""!=e&&r.toastPredeterminado.error(e)});return function(l){return n.apply(this,arguments)}}()).catch(n=>{switch(n.code){case"auth/invalid-email":e="Formato de correo electr\xf3nico inv\xe1lido.";break;case"auth/missing-password":e="Falta ingresar la contrase\xf1a.";break;case"auth/weak-password":e="La contrase\xf1a debe contener al menos 6 caracteres.";break;case"auth/wrong-password":e="La contrase\xf1a ingresada es inv\xe1lida.";break;case"auth/user-not-found":e="Usuario no encontrado.";break;default:e="Ha ocurrido un error y no se pudo cargar el usuario."}""!=e&&this.toastPredeterminado.error(e,"Ha ocurrido un error.")})}limpiarFormulario(){this.form.reset();for(const r in this.form.controls)this.form.controls.hasOwnProperty(r)&&this.form.controls[r].setValue("")}cargarUsuarioDefault(r){this.correo?.setValue(this.listaUsuarios[r].correo),this.clave?.setValue(this.listaUsuarios[r].clave)}}return a.\u0275fac=function(r){return new(r||a)(o.Y36(b.n),o.Y36(g.F0),o.Y36(L.I),o.Y36(Z.u),o.Y36(y.j))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-login"]],decls:29,vars:3,consts:[[1,"container"],[1,"card","p-4","mt-4","w-50","centrar","sombra"],[3,"formGroup","ngSubmit"],["for","correo",1,"form-label"],["type","email","id","correo","formControlName","correo",1,"form-control"],[4,"ngIf"],["for","clave",1,"form-label"],["type","password","id","clave","formControlName","clave",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mt-3"],["routerLink","../registro",1,""],["type","submit",1,"btn","btn-primary","mt-2","fw-bold","fs-5"],[1,"btn","btn-secondary","m-1","w-25","fw-bold","fs-6",3,"click"],[1,"d-block","text-danger"]],template:function(r,e){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"form",2),o.NdJ("ngSubmit",function(){return e.iniciarSesion()}),o.TgZ(3,"fieldset")(4,"legend"),o._uU(5,"Complete sus datos para ingresar"),o.qZA(),o.TgZ(6,"div")(7,"label",3),o._uU(8,"Ingrese su correo electr\xf3nico"),o.qZA(),o._UZ(9,"input",4),o.YNc(10,C,3,1,"ng-container",5),o.qZA(),o.TgZ(11,"div")(12,"label",6),o._uU(13,"Ingrese una contrase\xf1a"),o.qZA(),o._UZ(14,"input",7),o.YNc(15,T,3,1,"ng-container",5),o.qZA(),o.TgZ(16,"div",8)(17,"label",9),o._uU(18,"\xbfNo posee una cuenta? Registrese "),o.TgZ(19,"a",10),o._uU(20,"AQUI"),o.qZA()(),o.TgZ(21,"button",11),o._uU(22," Ingresar "),o.qZA()()()(),o.TgZ(23,"button",12),o.NdJ("click",function(){return e.cargarUsuarioDefault(0)}),o._uU(24,"Usuario"),o.qZA(),o.TgZ(25,"button",12),o.NdJ("click",function(){return e.cargarUsuarioDefault(1)}),o._uU(26,"Usuario 2"),o.qZA(),o.TgZ(27,"button",12),o.NdJ("click",function(){return e.cargarUsuarioDefault(2)}),o._uU(28,"Usuario 2"),o.qZA()()()),2&r&&(o.xp6(2),o.Q6J("formGroup",e.form),o.xp6(8),o.Q6J("ngIf",null==e.correo?null:e.correo.hasError("errorCorreo")),o.xp6(5),o.Q6J("ngIf",null==e.clave?null:e.clave.hasError("minlength")))},dependencies:[d.O5,g.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".centrar[_ngcontent-%COMP%]{margin:0 auto}.sombra[_ngcontent-%COMP%]{box-shadow:10px 10px 50px #ff060633;border-radius:30px}"]}),a})()}]}];let w=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[g.Bz.forChild(A),g.Bz]}),a})(),I=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[d.ez,w,i.u5,i.UX]}),a})()}}]);